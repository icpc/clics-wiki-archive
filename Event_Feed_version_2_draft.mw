The event feed is a set of data output by the [[CCS|Contest Control System]].

== Getting the feed ==

===Authentication===

:'''Comment:''' Add a description of the login/password for this feed [[User:Douglas Lane|Douglas Lane]] 17:14, 20 February 2011 (CET)

:'''Comment:''' Add a description of return data if authentication fails [[User:Douglas Lane|Douglas Lane]] 17:14, 20 February 2011 (CET)

===Accessing the feed===

<s>
Connect to port 4713 and the entire feed for the contest will be sent to you. When the contest is finalized, the contest tag will be closed and the connection closed.

Connect to port 4714 and the entire feed for the contest will be sent to you, with the exception that no judgement information will be sent for runs submitted during the last hour. When the contest is finalized, the contest tag will be closed and the connection closed (but you will still not get judgements for runs submitted the last hour).
</s>

:'''Comment''': The CCS will define the port(s) and the Account Type can be used to filter/determine which data is sent [[User:Douglas Lane|Douglas Lane]] 00:54, 17 May 2011 (CEST)

===Account Types===

All events are sent to Admin and Resolver, all other types stop
receiving [[TBD]] events when contest is frozen.

{| class="wikitable"
! Type!! Description
|-
|Admin|| All events
|-
|Balloon|| Balloon Notifications only
|-
|Commentator|| [[TBD]], request team source code
|-
|Floor / Team|| [[TBD]]
|-
|Judge|| [[TBD]]
|-
|Public|| [[TBD]]
|-
|Resolver|| All events
|-
|}

== File format ==
The event feed is an XML document within the root element <tt><contest></tt>.

All events are separate elements at the top level.

{| class="wikitable"
|+ Event types/tags
! Event/Element !! Contains
|-
|info|| contest information and updates
|-
|language|| submission language information
|-
|region|| super region information
|-
|judgement|| judgement information
|-
|problem|| problem information
|-
|team|| team information
|-
|clar|| submitted clarification information and updates
|-
|run|| submitted run information and updates
|-
|testcase|| judgement of individual test cases for a run
|-
|finalized|| the contest standings/medals are assigned, contest is over
|}

Notes
# Submission events have a contest-time element in minutes 
# Timestamped events all have a timestamp element in decimal seconds.
# The <tt><finalized></tt> element is followed by a <tt></contest></tt> tag

:'''Comment''' Every event should have a timestamp, right ? [[User:Douglas Lane|Douglas Lane]] 17:38, 17 April 2011 (CEST)

=== info ===

 <info>
   <title>The 2010 World Finals of the ACM International Collegiate Programming Contest</title>
   <length>05:00:00</length>
   <penalty>20</penalty>
   <started>false</started>
   <starttime>1265335138.26</starttime>
 </info>

;title: contest title string
;length: length of contest in HH:MM:SS format
;penalty: penalty time in minutes
;started: started flag
;starttime: starttime as a timestamp in decimal seconds

=== language ===

 <language>
   <name>C++</name>
 </language>

;name: language name

=== region ===

 <region external-id="3012">
   <name>Europe</name>
 </region>

;external-id: identifier (integer) from [[Contest_Control_System#groups.tsv|groups.tsv (Group ID)]]
;name: super-region name from [[Contest_Control_System#groups.tsv|groups.tsv]]

=== judgement ===

 <judgement>
   <acronym>CE</acronym>
   <name>Compile Error</name>
 </judgement>

;acronym: judgement acronym
;name: descriptive name

=== problem ===

 <problem id="1" state="enabled">
   <label>A</label>
   <name>APL Lives!</name>
   <balloon-color rgb="#ffff00">yellow</balloon-color>
 </problem>

;id: problem identifier
;state: one of enabled, paused, disabled
;label: one letter label
;name: descriptive name
;balloon-color: balloon color name
;rgb: balloon color rgb value

=== team ===

 <team id="1" external-id="23412">
   <name>American University of Beirut</name>
   <nationality>LBN</nationality>
   <university>American University of Beirut</university> 
   <region>Europe</region> 
 </team>

;id: team identifier. from [[Contest_Control_System#teams.tsv|teams.tsv (team number)]] 
;external-id: team id from [[Contest_Control_System#teams.tsv|teams.tsv (Reservation ID)]] 
;name: team name from [[Contest_Control_System#teams.tsv|teams.tsv]]
;nationality: nationality as ISO 3166-1 alpha-3, from [[Contest_Control_System#teams.tsv|teams.tsv]]
;university: university affiliation, from [[Contest_Control_System#teams.tsv|teams.tsv]]
;region: super region name [[Contest_Control_System#groups.tsv | groups.tsv]] from [[Contest_Control_System#teams.tsv|teams.tsv]]

=== clar ===

 <clar id="1" team-id="0" problem-id="1">
   <answer>The number of pieces will fit in a signed 32-bit integer.</answer>
   <question>What is the upper limit on the number of pieces of chocolate requested by the friends?</question>
   <to-all>true</to-all>
   <contest-time>118.48</contest-time>
   <timestamp>1265335256.74</timestamp>
 </clar>

;id: clarification identifier
;team-id: team ID
;problem-id: problem ID
;question: A question, typically from a team.
;answer: The judges answer to the question
;to-all: true if the clarification was sent to all teams
;contest-time: contest (elapsed) time in minutes
;timestamp: the current computer time when this element was created, decimal seconds

=== run ===

 <run id="1410" team-id="74" problem-id="4">
   <language>C++</language>
   <judgement>WA</judgement>
   <penalty>true</penalty>
   <contest-time>17960.74</contest-time>
   <timestamp>1265353100.29</timestamp>
 </run>

;id: run identifier
;team-id: team ID
;problem-id: problem ID
;language: language name
;judgement: judgement acronym
;penalty: penalty flag
;contest-time: official submission time used for scoring
;timestamp: the current computer time when this element was created

=== testcase ===

 <testcase run-id="1">
   &lt;i>1&lt;/i>
   <n>1</n>
   <judgement>WA</judgement>
   <contest-time>939.75</contest-time>
   <timestamp>1265336078.01</timestamp>
 </testcase>

;run-id: [[TBD]]
;i: testcase number
;n: total number of testcases
;judgement: judgement acronym
;contest-time: [[TBD]]
;timestamp: the current computer time when this element was created

:'''Comment''' Is contest-time when the run was submitted or when the testcase was run ? [[User:Douglas Lane|Douglas Lane]] 19:50, 27 February 2011 (CET)

===notification===

A notification should be sent the first time a team solves a particular problem.  A notification is not sent when the team subsequently solves the problem.  If a previously accepted run is rejected due to rejudging, no notification is sent.   

:'''Comment:''' If a team has solved a problem, then the judges determine that the team has not solved the problem what action is taken? [[User:Douglas Lane|Douglas Lane]] 20:10, 16 May 2011 (CEST)

:'''Comment:''' Is the program that consumes the notifications responsible for tracking which have been send and which have not? [[User:Douglas Lane|Douglas Lane]] 17:06, 20 February 2011 (CET)

 <notification>
  <team-id>34</team-id>
  <team>U Waterloo</team>
  <time>132.04213</time>
  <timestamp>1298733213.102</timestamp>
  <nr>214</nr>
  <balloon>
    <problem-id>B</problem-id>
    <problem>Bulls and bears</problem>
    <rgb>ff0000</rgb>
    <color>Red</color>
  </balloon>
  <first-by-team>true</first-by-team>
  <balloons>
    <!-- balloons that team already has -->
    <balloon>
      <problem-id>D</problem-id>
      <problem>Down the hill</problem>
      <rgb>33cc00</rgb>
      <color>Green</color>
    </balloon>
    <balloon>
      <problem-id>F</problem-id>
      <problem>Failing to make the grade</problem>
      <rgb>ffff00</rgb>
      <color>Yellow</color>
    </balloon>
  </balloons>
 </notification>

Sent for each balloon to be printed. Contains:
;team-id: Team's number in contest (1, 2, etc) (int)
;team: Team name (same as or similar to team sign) (string)
;time: minutes since contest started, contest time (float)
;nr: id of notification, sequential starting at 1 (int)
;balloon: balloon info, see balloon element below
;first-in-contest: required only when true (bool)
;first-for-problem: required only when true (bool)
;first-by-team: required only when true (bool)
;balloons: list of balloons team should have (including this balloon)

:'''Comment''' "nr" name - should be spelled out (avoid using acronyms) [[User:Douglas Lane|Douglas Lane]] 20:05, 16 May 2011 (CEST)

=====balloon=====
Describes a balloon for a problem
;problem-id : A, B, etc (character)
;problem : name / title of problem (string)
;rgb : 3-byte RGB value encoded in hex (string)
;color : color name (string)

=== finalized ===

Note that the finalized element is followed immediately by a <tt></contest></tt> tag.

 <finalized>
   <last-gold>4</last-gold>
   <last-silver>8</last-silver>
   <last-bronze>12</last-bronze>
   <comment>Finalized by John Doe and Jane Doe</comment>
   <timestamp>1265336078.01</timestamp>
 </finalized>

;timestamp: [[TBD]]
;last-gold:integer, last place to receive a gold
;last-silver:integer, last place to receive a silver
;last-bronze:integer, last place to receive a bronze
;comment:text
