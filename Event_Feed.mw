The ''Event Feed'' is an externally-accessible XML feed of contest data supplied by a [[CCS|Contest Control System]]. The event feed is the primary way that 'external' clients can get the state of a running contest. 

== Getting the feed ==

Connect to port 4713 and the entire feed for the contest will be sent to you. When the contest is finalized, the contest tag will be closed and the connection closed.

Connect to port 4714 and the entire feed for the contest will be sent to you, with the exception that no judgement information will be sent for runs submitted during the last hour. When the contest is finalized, the contest tag will be closed and the connection closed (but you will still not get judgements for runs submitted the last hour).

== Top level structure ==

The event feed is an XML document within the root element <tt><contest></tt>. 

Within the contest element are a number of configuration items and events, each of which are separate top-level elements:

Event types & tags:
{| class="wikitable"
! Element !! Contains !! Type
|-
|info|| contest information and updates || Configuration
|-
|language|| submission language information || Configuration
|-
|region|| superregion information || Configuration
|-
|judgement|| judgement information || Configuration
|-
|problem|| problem information || Configuration
|-
|team|| team information || Configuration
|-
|clar-request|| clarification request || Event
|-
|clar-response|| clarification (answers to clarification requests) or broadcast messages|| Event
|-
|submission|| submission from a team || Event
|-
|submission-judgement|| result of submission from a team || Event
|-
|run|| judgement of individual input file for a run || Event
|-
|finalized|| the contest standings/medals are assigned, contest is over || Event
|-
|}

Other elements beyond what is documented here may also be sent, these should be ignored. This applies both at the top level and within the top-level elements.

Notes
# All child-elements are required unless otherwise documented.
# All contest-time elements are in decimal seconds.
# All timestamp elements are in decimal seconds since the Unix epoch, Jan 1st, 1970 00:00:00 UTC.

== Configuration Elements ==

Configuration elements will generally be sent in the beginning of the feed. There are two exceptions.

* If the contest has already started events may be sent while there are still configuration elements remaining.
* If the data in a configuration element is changed it will be resent.

=== Info Element ===

Any new info element overwrites earlier elements.

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|title || Contest title || xsd:string
|-
|length || Length of contest in HH:MM:SS format || xsd:string
|-
|scoreboard-freeze-length || Length of time at the end of the contest when scoreboard is frozen in HH:MM:SS format || xsd:string
|-
|penalty|| Penalty time in minutes || xsd:int
|-
|start-time || Wall-clock start time of the contest || xsd:decimal timestamp
|}

Example:

 <info>
   <title>The 2010 World Finals of the ACM International Collegiate Programming Contest</title>
   <length>05:00:00</length>
   <scoreboard-freeze-length>01:00:00</scoreboard-freeze-length>
   <penalty>20</penalty>
   <start-time>1265335138.26</start-time>
 </info>

=== Language Element ===

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|name || Language name || xsd:string
|}

Example:

 <language>
   <name>C++</name>
 </language>

=== Group Element ===

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|name || Group name from [[Contest_Control_System#groups.tsv|groups.tsv]] || xsd:string
|}

Example:

 <group>
   <name>Europe</name>
 </group>

=== Judgement Element ===

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|acronym || Judgement acronym || xsd:string
|-
|name || Judgement full name || xsd:string
|-
|penalty || True if this judgement is a failure that causes penalty time || xsd:boolean
|}

Example:

 <judgement>
   <acronym>WA</acronym>
   <name>Wrong Answer</name>
   <penalty>true</penalty>
 </judgement>

=== Problem Element ===

A problem element is identified by it's label. If a team element with the same label as an earlier element arrives the latter overwrites the former.

Format:

{| class="wikitable"
! Name !! Description !! Child Element/Attribute !! Type
|-
|label || Problem label, typically a single upper case letter || element || xsd:string
|-
|name || Problem name || element || xsd:string
|}

Example:

 <problem>
   <label>A</label>
   <name>APL Lives!</name>
 </problem>

=== Team Element ===

A team element is identified by it's team number. If a team element with the same team number as an earlier element arrives the latter overwrites the former.

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|n || Team number|| xsd:int
|-
|icpc-id || ID from ICPC registration system. Used to match this team to other resources, such as university logos or team pictures || xsd:int
|-
|name || Team name from [[Contest_Control_System#teams.tsv|teams.tsv]] || xsd:string
|-
|nationality || Country code, ISO 3166-1 alpha-3, from [[Contest_Control_System#teams.tsv|teams.tsv]] || xsd:string
|-
|university || University name from [[Contest_Control_System#teams.tsv|teams.tsv]] || xsd:string
|-
|group || Group name [[Contest_Control_System#groups.tsv | groups.tsv]] from [[Contest_Control_System#teams.tsv|teams.tsv]] || xsd:string
|}

Example:

 <team>
   <n>1</n>
   <external-id>23412</external-id>
   <name>American University of Beirut</name>
   <nationality>LBN</nationality>
   <university>American University of Beirut</university> 
   <group>Europe</group> 
 </team>

== Event Elements ==

=== Clarification Request Event ===

The clar-request event is sent when a team submits a clarification request.

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|id || Clarification Request ID || xsd:int
|-
|team-id || Team ID || xsd:int
|-
|question || A question, typically from a team || xsd:string
|-
|category || Clarification category || xsd:string
|-
|contest-time || Contest (elapsed) time when the clarification was submitted || xsd:decimal
|-
|timestamp || Wall-clock time when the clarification was submitted || xsd:decimal
|}

Example:

 <clar-request>
   <id>1</id>
   <team-id>0</team-id>
   <question>What is the upper limit on the number of pieces of chocolate requested by the friends?</question>
   <category>Problem C</category>
   <contest-time>118.48</contest-time>
   <timestamp>1265335256.74</timestamp>
 </clar-request>

=== Clarification Response Event ===

The clar response event is sent when a clar request has been answered.

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|clar-request-id || Clarification Request ID || xsd:int
|-
|answer || Judge's answer to the question || xsd:string
|-
|to-all || True if the response was sent to all teams || xsd:boolean
|-
|contest-time || Contest (elapsed) time when the response was submitted || xsd:decimal
|-
|timestamp || Wall-clock time when the response was submitted || xsd:decimal
|}

Example:

 <clar-response clar-request-id="1">
   <answer>The number of pieces will fit in a signed 32-bit integer.</answer>
   <to-all>true</to-all>
   <contest-time>118.48</contest-time>
   <timestamp>1265335256.74</timestamp>
 </clar-response>

=== Submission Event ===

An event sent whenever a team makes a submission.

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|id || Submission ID || xsd:int
|-
|team-id || Team ID || xsd:int
|-
|problem-id || Problem ID || xsd:int
|-
|language || Language name || xsd:string
|-
|contest-time || Contest (elapsed) time when the run was submitted || xsd:decimal
|-
|timestamp || Wall-clock time when the run was submitted || xsd:decimal
|}

Example:

 <submission>
   <id>1410</id>
   <team-id>74</team-id>
   <problem-id>4</problem-id>
   <language>C++</language>
   <contest-time>17960.74</contest-time>
   <timestamp>1265353100.29</timestamp>
 </submission>

=== Submission Judgement Event ===

A run judgement event is sent whenever a judgement has been assigned to a run.

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|submission-id || Submission ID || xsd:int
|-
|judgement|| Judgement acronym || xsd:string
|-
|contest-time || Contest (elapsed) time when the judgement was assigned || xsd:decimal
|-
|timestamp || Wall-clock time when the judgement was assigned || xsd:decimal
|}

Example:

 <submission-judgement>
   <run-id>1410</run-id>
   <judgement>WA</judgement>
   <contest-time>179.74</contest-time>
   <timestamp>1265353100.29</timestamp>
 </submission-judgement>

=== Run Event ===

A test result event is sent when a run is judged against an input file.

Format:

{| class="wikitable"
! Name !! Description !! Child Element/Attribute !! Type
|-
|submission-id || Submission ID of submission that this run is part of|| attribute || xsd:int
|-
|i || Input file index (1-based) || attribute || xsd:int
|-
|n || Total number of input files || attribute || xsd:int
|-
|judgement || Judgement acronym. Must match an acronym given in some earlier judgement element || element || xsd:string
|-
|contest-time || Contest (elapsed) time when the test was judged || element || xsd:decimal
|-
|timestamp || Wall-clock time when the test was judged || element || xsd:decimal
|}

Example:
 <run>
   <submission-id>1</run-id>
   <i>1</i>
   <judgement>WA</judgement>
   <n>1</n>
   <time>939.751724958</time>
   <timestamp>1265336078.01</timestamp>
 </run>

=== Scoreboard Update Event ===

=== Finalized Event ===

The finalized event is sent when the contest is finalized. 

Format:

{| class="wikitable"
! Name !! Description !! Type
|-
|timestamp || Wall-clock time when the contest was finalized || xsd:decimal
|-
|last-gold|| The last place to receive a gold (should always be 4 for a [[Contest_Control_System#Scoring_Data_Generation|compliant system]]) || xsd:int
|-
|last-silver|| The last place to receive a silver (should always be 8 for a [[Contest_Control_System#Scoring_Data_Generation|compliant system]]) || xsd:int
|-
|last-bronze|| The last place to receive a bronze (should often be 12 but could very possibly be something else) || xsd:int
|-
|comment|| A comment provided during the finalization || xsd:string
|}

Example:

 <finalized>
   <timestamp>1265336078.01</timestamp>
   <last-gold>4</last-gold>
   <last-silver>8</last-silver>
   <last-bronze>12</last-bronze>
   <comment>Finalized by John Doe and Jane Doe</comment>
 </finalized>

== Change List ==

The following is a list of behavioural changes from the 2014 event feed:

* Removed <started> boolean from <info>
* Removed <id> from <language>
* Renamed <run> to <submission>
* Renamed <testcase> to <run>
